AFRAME.registerComponent('zoom-controls', {
    schema: {
        min: {type: 'number', default: 30},
        max: {type: 'number', default: 90}
    },
    init: function () {
        this.cameraEl = this.el.sceneEl.camera.el;
        this.el.sceneEl.addEventListener('wheel', this.onWheel.bind(this));
        this.setupPinchZoom();
        // Agregar este código para permitir el movimiento en vertical con dispositivos móviles
        this.el.sceneEl.addEventListener('touchstart', (e) => {
            e.preventDefault();
        });
        this.el.sceneEl.addEventListener('touchmove', (e) => {
            if (e.touches.length === 1 && e.target.classList.contains('a-scene')) {
                e.preventDefault();
            }
        });
    },
    onWheel: function (event) {
        const cameraComponent = this.cameraEl.getAttribute('camera');
        const newFov = Math.max(this.data.min, Math.min(this.data.max, cameraComponent.fov - event.deltaY * 0.05));
        this.cameraEl.setAttribute('camera', 'fov', newFov);
    },
    setupPinchZoom: function () {
        const canvas = this.el.sceneEl.renderer.domElement;
        const hammer = new Hammer(canvas);

        hammer.on('pinch', (event) => {
            const cameraComponent = this.cameraEl.getAttribute('camera');
            let newFov = cameraComponent.fov / event.scale;
            newFov = Math.max(this.data.min, Math.min(this.data.max, newFov));
            this.cameraEl.setAttribute('camera', 'fov', newFov);
        });
    }
});
