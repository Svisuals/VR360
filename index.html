<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visor 360°</title>
    <style>
        body { margin: 0; overflow: hidden; }
        #menu1, #menu2 { position: absolute; top: 10px; z-index: 1000; }
        #menu1 { left: 10px; }
        #menu2 { left: 150px; }
        #switchViewBtn { position: absolute; top: 10px; left: 290px; z-index: 1000; }
        #vrBtn { position: absolute; bottom: 10px; right: 10px; z-index: 1000; }
    </style>
</head>
<body>
    <div id="menu1">
        <select id="photoSelector1">
            <option value="images/image1.JPG">Imagem 1</option>
            <option value="images/image2.JPG">Imagem 2</option>
            <option value="images/image3.JPG">Imagem 3</option>
        </select>
    </div>
    <div id="menu2">
        <select id="photoSelector2">
            <option value="images/image1.JPG">Imagem 1</option>
            <option value="images/image2.JPG">Imagem 2</option>
            <option value="images/image3.JPG">Imagem 3</option>
        </select>
    </div>
    <button id="switchViewBtn">Alternar Visualização</button>
    <button id="vrBtn">VR</button>
    <a-scene id="scene" embedded>
        <!-- Visor 360° será adicionado aqui -->
    </a-scene>

    <script src="https://cdn.rawgit.com/pchen66/panolens.js/master/build/panolens.min.js"></script>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script>
        const scene = document.querySelector('#scene');
        const photoSelector1 = document.querySelector('#photoSelector1');
        const photoSelector2 = document.querySelector('#photoSelector2');
        const switchViewBtn = document.querySelector('#switchViewBtn');
        const vrBtn = document.querySelector('#vrBtn');
        let isDualView = false;

        function loadPanorama(photoUrl, isFirstView) {
            // Limpa o conteúdo da cena
            if (scene.hasChildNodes()) {
                scene.innerHTML = '';
            }
            
            if (isDualView) {
                // Carrega dois visores
                const panorama1 = new PANOLENS.ImagePanorama(photoSelector1.value);
                const panorama2 = new PANOLENS.ImagePanorama(photoSelector2.value);
                const viewer = new PANOLENS.Viewer();
                viewer.add(panorama1);
                viewer.add(panorama2);
                scene.appendChild(viewer.container);
            } else {
                // Carrega um único visor
                const panorama = new PANOLENS.ImagePanorama(photoUrl);
                const viewer = new PANOLENS.Viewer();
                viewer.add(panorama);
                scene.appendChild(viewer.container);
            }
        }

        function toggleView() {
            isDualView = !isDualView;
            if (isDualView) {
                scene.innerHTML = `
                    <a-scene>
                        <a-sky id="sky1" src="${photoSelector1.value}" rotation="0 -90 0"></a-sky>
                        <a-sky id="sky2" src="${photoSelector2.value}" rotation="0 90 0"></a-sky>
                    </a-scene>`;
            } else {
                loadPanorama(photoSelector1.value, false);
            }
        }

        photoSelector1.addEventListener('change', (event) => {
            if (isDualView) {
                toggleView();
            } else {
                loadPanorama(event.target.value, false);
            }
        });

        photoSelector2.addEventListener('change', (event) => {
            if (isDualView) {
                toggleView();
            }
        });

        switchViewBtn.addEventListener('click', () => {
            toggleView();
        });

        vrBtn.addEventListener('click', () => {
            // Supondo que você deseja iniciar o modo VR
            // Substitua pelo código apropriado para sua implementação VR
            alert('Modo VR ativado!');
        });

        // Carregar a primeira foto por padrão
        loadPanorama(photoSelector1.value, false);
    </script>
</body>
</html>
